{% set haproxy = salt['grains.filter_by']({
    'Ubuntu': {
        'pkg': 'haproxy',
        'service': 'haproxy',
        'conf': '/etc/haproxy/haproxy.cfg',
        'filename': 'salt://haproxy/files/ubuntu/haproxy.cfg.jinja',
    },
    'CentOS': {
        'pkg': 'haproxy',
        'service': 'haproxy',
        'conf': '/etc/haproxy/haproxy.cfg',
        'filename': 'salt://haproxy/files/centos/haproxy.cfg.jinja',
    },
  }, grain='os', merge=salt['pillar.get']('haproxy'))
%}

  
